<!--REFERENCES:
    + bootstrap 5 and Javascript learnt with W3school
    + https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement
    + https://developer.mozilla.org/en-US/docs/Web/Events
    + https://web.dev/read-files/
-->



<!DOCTYPE html>
<html lang="en">
<head>
  <title>Profile_1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</head>

<!--grid system is max 12. if we want to have 3 columns on the same row: each column should take only 4. see the application below-->>
<body>
      
    <div class="container mt-5">
        <div class="row">
            <!-- Section of profile picture and personal quote-->
            <div class="col-sm-4">
                <!-- profile picture-->
                <div class="row">
                    <h3>Profile picture</h3>
                    <picture> <!--to include many classes for the image: example img-fluid, img-thumbnail to a specific image-->
                        <img src="cuteCats.jpg" class="img-fluid img-thumbnail img-rounded" alt="...">
                    </picture>
                </div>
                <!-- personal quote-->
                <div class="row">
                <h3>Personal quote</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris...</p>
                </div>
            </div>

            <!-- Album and Chat section-->
            <div class="col-sm-8">
                <!-- Album-->
                <!--Album title-->
                <div class="row">
                    <h3>Album section</h3>
                    <p>Album description</p>
                    <!--UPLOAD PICTURES-->
                    <input type="file" id="getpath" onchange="addDivElem(event)"> <!--same as using element <button>-->
                    
                    <!--UPLOAD PICTURES-->
                </div>
                <!--Album content-->
                    <!--row 1 for images -->
                    
                    <div class="row">
            
                        <!--Image1-->
                        <div class="col-sm-4">
                 
                                <img src="cuteCats.jpg" class="img-fluid img-thumbnail img-rounded" alt="...">
                                <!--LIKES-->
                                <div class="col-sm-6">
                                    <button type="button" class="btn" onclick="img1.display_count(1)">
                                    
                                      <img src="like_button.png" class="img-thumbnail img-rounded" alt="...">
                                      <span class="badge bg-danger" id="like 1"></span>
                              
                                    </button>
                                </div>
                                <!--LIKES-->
                        </div>
                        <!--Image1-->
                        <div class="col-sm-4">
                    
                                <img src="cuteCats.jpg" class="img-fluid img-thumbnail img-rounded" alt="...">
                                 <!--LIKES-->
                                 <div class="col-sm-6">
                                    <button type="button" class="btn" onclick="img2.display_count(2)">
                                    
                                      <img src="like_button.png" class="img-thumbnail img-rounded" alt="...">
                                      <span class="badge bg-danger" id="like 2"></span>
                              
                                    </button>
                                </div>
                                <!--LIKES-->
                          
                        </div>
                        <!--Image1-->
                        <div class="col-sm-4">
                   
                                <img src="cuteCats.jpg" class="img-fluid img-thumbnail" alt="...">
                                  <!--LIKES-->
                                  <div class="col-sm-6">
                                    <button type="button" class="btn" onclick="img3.display_count(3)">
                                    
                                      <img src="like_button.png" class="img-thumbnail img-rounded" alt="...">
                                      <span class="badge bg-danger" id="like 3"></span>
                              
                                    </button>
                                </div>
                                <!--LIKES-->
                        </div>
                    
                    </div>
                
                    <!--row 2 for images -->
                    
                    <div class="row">
                
                        <!--Image1-->
                        <div class="col-sm-4">
                            
                                <img src="cuteCats.jpg" class="img-fluid img-thumbnail" alt="...">
                         
                        </div>
                        <!--Image1-->
                        <div class="col-sm-4">
                          
                                <img src="cuteCats.jpg" class="img-fluid img-thumbnail" alt="...">
                         
                        </div>
                        <!--Image1-->
                        <div class="col-sm-4">
                         
                                <img src="cuteCats.jpg" class="img-fluid img-thumbnail" alt="...">
                           
                        </div>
                
                    </div>

                    <!--row 3 for images -->
                    <div class="row">

                        <div class="col-sm-4">
                            <img id="img1" src="" class="img-fluid img-thumbnail" alt="...">
                        </div>

                    </div>
                    
            <!--CHAT section-->
            <div class="row">
                <h3>Chat section</h3>
                
                <div class="col-sm-8">
                    <input id="message"  type="text" oninput="getmessage()">
                </div>

                <div class="col-sm-4">     
                    <input type="button" value="send" onclick="display_message()">
                </div>
                
                <div class="row">
                    <p id="msg-bubble 1"></p>
                </div>
 
            </div>
        </div>
        </div>
    </div>
    
    <!--JAVASCRIPT CODES FOR DYNAMIC WEB-->
    <script>
    // for counting likes in each image:
    class like_obj
    {
        constructor(value)
        {
            this.count=value;
        }
        count_like()
        {
            this.count=this.count+1;
        }
        display_count(likeId)
        {
            this.count_like();
            likeId="like"+" "+likeId
            //console.log(typeof(likeId));
            //console.log(likeId);
            //console.log(typeof(this.count));
            //console.log(this.count);
            let element=document.getElementById(likeId);
            element.innerHTML=this.count;
            
        }
    }
    
    let img1= new like_obj(0); img2= new like_obj(0); img3= new like_obj(0)
     
    // get the input message and display the message for the chat section:
    var x;
    var count_send=0;
    var msg_container=[];
    function getmessage()
    {
        x=document.getElementById("message").value
        console.log(x);
    }

    function display_message()
    {
        console.log("before adding to msg_con");
        console.log(x);
        count_send=count_send+1;
        msg_container[count_send]=x+"<br>";
        delete msg_container[0];
        // get the whole message before print it:
        var whole_msg="";
        for (let tx in msg_container)
        {
            if (tx == "0")
            {
                continue;
            }
            whole_msg=whole_msg + msg_container[tx];
        }
        document.getElementById("msg-bubble 1").innerHTML=whole_msg;
    }

    //upload pictures:

    // not clicked yet-> hide:
    document.getElementById("img1").style.display="none";
    function addDivElem(event) // pass the result of the event fired at the element with id="getpath"
    {
        document.getElementById("img1").style.display="inline";
        //var reader= new FileReader();

        // if the file is uploaded sucessfully
        //reader.addEventListener("load", function ()
        //{
        //    console.log("Hello\n");
        //})
        // get the handle of the element:
        //var pic_area= document.getElementById("PicPath");
        console.log("Hello\n");
        const fileList = event.target.files[0];
        console.log(fileList.name);

        const reader = new FileReader();

        // (event) => {..} : is an arrow function whose input is the 'event' object
        reader.addEventListener('load', (event) => {
        console.log(event.target.result);
        // must get the handle to the tag <img> where the image should be uploaded to
        var img_handle=document.getElementById("img1");

        // the result produced by 'readAsDataURL' is used as the path to the source image here:
        img_handle.src=event.target.result;
        //img.src = event.target.result;
        });

        //console.log(fileList.Blob);

        // must use 'readAsDataURL' in order to get the right path source to the uploaded image!!!
        reader.readAsDataURL(fileList);
    }

    </script>
    <!--JAVASCRIPT CODES FOR DYNAMIC WEB-->
  
</body>

</html>
    